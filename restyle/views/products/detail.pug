extends ../layouts/base

block content
  div(class="bg-white")
    div(class="max-w-2xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:max-w-7xl lg:px-8")
      div(class="lg:grid lg:grid-cols-2 lg:gap-x-8 lg:items-start")
        // Image gallery
        div(class="flex flex-col-reverse")
          div(class="hidden mt-6 w-full max-w-2xl mx-auto sm:block lg:max-w-none")
            div(class="grid grid-cols-4 gap-6")
              each image in [product.imageUrl, product.imageUrl, product.imageUrl, product.imageUrl]
                div(class="aspect-w-1 aspect-h-1 rounded-md overflow-hidden")
                  img(src=image alt="" class="w-full h-full object-center object-cover")

          div(class="w-full aspect-w-1 aspect-h-1 rounded-lg overflow-hidden")
            img(src=product.imageUrl alt=product.name class="w-full h-full object-center object-cover")

        // Product info
        div(class="mt-10 px-4 sm:px-0 sm:mt-16 lg:mt-0")
          h1(class="text-3xl font-extrabold tracking-tight text-gray-900")= product.name
          div(class="mt-3")
            h2(class="sr-only") Product information
            p(class="text-3xl text-gray-900")= `$${product.price}`

          // Reviews
          div(class="mt-3")
            div(class="flex items-center")
              div(class="flex items-center")
                - for (let i = 0; i < 5; i++)
                  if i < Math.round(product.averageRating || 0)
                    svg(class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true")
                      path(d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z")
                  else
                    svg(class="h-5 w-5 text-gray-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true")
                      path(d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z")
              p(class="sr-only")= `${product.averageRating || 0} out of 5 stars`

          div(class="mt-6")
            h3(class="sr-only") Description
            div(class="text-base text-gray-700 space-y-6")
              p= product.description

          div(class="mt-6")
            // Size selector
            div(class="mt-10 flex sm:flex-col1")
              button(type="button" class="max-w-xs flex-1 bg-indigo-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-indigo-500 sm:w-full") Add to bag

          // Product details
          div(class="mt-8 border-t border-gray-200 pt-8")
            h2(class="text-sm font-medium text-gray-900") Details
            div(class="mt-4 prose prose-sm text-gray-500")
              ul(class="list-disc pl-5 space-y-2")
                li Lightweight, breathable hoodie
                li 100% cotton
                li Machine wash cold with similar colors

          // Reviews section
          div(class="mt-8 border-t border-gray-200 pt-8")
            h2(class="text-sm font-medium text-gray-900") Customer Reviews
            div(class="mt-4 space-y-6")
              each review in product.reviews || []
                div(class="flex")
                  div(class="flex-shrink-0")
                    img(class="h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="")
                  div(class="ml-3")
                    div(class="flex items-center")
                      - for (let i = 0; i < 5; i++)
                        if i < review.rating
                          svg(class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true")
                            path(d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z")
                      p(class="ml-3 text-sm text-gray-700")= `${review.rating} stars`
                    div(class="mt-2 text-sm text-gray-600")
                      p= review.comment